// Anm Â© 2014-2015 Andrey Polischuk github.com/andrepolischuk/anm
!function(){"use strict";function f(){}function h(a){var b={};return b.x=a.clientX-window.innerWidth/2||0,b.y=a.clientY-window.innerHeight/2||0,b.fi=Math.atan(0===b.x?1/0:-b.y/b.x)+(b.x<0?Math.PI:-b.y<0?2*Math.PI:0),b.s=45*Math.sin(2*b.fi)/100,b.x/=100,b.y/=100,b.r=2*(Math.sqrt(Math.pow(b.x,2)+Math.pow(b.y,2))/Math.sqrt(Math.pow(window.innerWidth,2)+Math.pow(window.innerHeight,2))),b}function i(a){for(var b={},c=0;c<d.length;c++)b[d[c]]=+a.getAttribute("data-speed-"+d[c])||0;return b}function j(a,b){var c={};return c.x=a.x*b.x+"px",c.y=a.y*b.y+"px",c.scale=1+a.r*b.scale,c.opacity=1-a.r*Math.abs(b.opacity),c.rotate=100*-a.s*a.r*b.rotate+"deg",c}function k(a,c){if(b)a.style.marginLeft=c.x,a.style.marginTop=c.y;else{for(var d in e)e.hasOwnProperty(d)&&(a.style[d]=[e[d],"(",c.x+","+c.y,"translate"===e[d]?"":",0",") scale(",c.scale,") rotate(",c.rotate,")"].join(""));a.style.opacity=c.opacity,a.style.MozOpacity=c.opacity}}function l(a){if(!c){a=a||{},a="touchmove"===a.type?a.changedTouches[0]:a;for(var b,d,l,e=h(a),f=0;f<g.length;f++)l=g[f],b=i(l),d=j(e,b),k(l,d)}}var a=document.body.getAttribute("data-anm");if(a){var c,b=/MSIE.\d+\./gi.test(navigator.userAgent)&&+navigator.userAgent.replace(/.*MSIE.(\d+)\..*/gi,"$1")<9,d=["x","y","scale","opacity","rotate"],e={webkitTransform:"translate3d",MozTransform:"translate3d",msTransform:"translate3d",OTransform:"translate",transform:"translate3d"},g=f.elements=document.querySelectorAll(a);f.on=function(){c=!1},f.off=function(){c=!0},f.toggle=function(){c=!c},l(),window.addEventListener("ontouchstart"in window||"onmsgesturechange"in window?"touchmove":"mousemove",l,!1),"function"==typeof define&&define.amd?define([],function(){return f}):"undefined"!=typeof module&&module.exports?module.exports=f:this.anm=f}}.call(this);
